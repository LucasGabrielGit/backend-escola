// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model PessoaFisica {
  id             Int         @id @unique @default(autoincrement())
  nome           String
  dataNascimento DateTime
  genero         String
  email          String
  endereco       String
  numTelefone    String
  cpf            String      @unique
  rg             String      @unique
  nacionalidade  String
  observacoes    String
  aluno          Aluno[]
  arofessor      Professor[]
}

model Aluno {
  id             Int          @id @unique @default(autoincrement())
  pessoaFisicaId Int
  pessoaFisica   PessoaFisica @relation(fields: [pessoaFisicaId], references: [id])
  usuario        String       @unique
  senha          String
  matriculas     Matricula[]
  pendencias     Pendencia[]
}

model Professor {
  id                 Int          @id @unique @default(autoincrement())
  pessoaFisicaId     Int
  pessoaFisica       PessoaFisica @relation(fields: [pessoaFisicaId], references: [id])
  disciplinaId       Int
  disciplina         Disciplina   @relation(fields: [disciplinaId], references: [id])
  titulacao          String
  areaEspecializacao String
  observacoes        String
}

model Turma {
  id          Int         @id @unique @default(autoincrement())
  ano         String
  periodo     String
  capacidade  Int
  turno       String
  observacoes String
  matriculas  Matricula[]
}

model Matricula {
  id              Int    @id @unique @default(autoincrement())
  numeroMatricula String @unique

  alunoId Int
  aluno   Aluno @relation(fields: [alunoId], references: [id])
  turmaId Int
  turma   Turma @relation(fields: [turmaId], references: [id])

  dataMatricula DateTime
  status        Int
  observacoes   String
  notas         Nota[]

  statusMatriculaId Int
  statusMatricula   StatusMatricula @relation(fields: [statusMatriculaId], references: [id])
}

model Pendencia {
  id        Int    @id @unique @default(autoincrement())
  descricao String
  alunoId   Int
  aluno     Aluno  @relation(fields: [alunoId], references: [id])
}

model StatusMatricula {
  id        Int         @id @unique @default(autoincrement())
  descricao String
  matricula Matricula[]
}

model Nota {
  id          Int       @id @unique @default(autoincrement())
  matriculaId Int
  matricula   Matricula @relation(fields: [matriculaId], references: [id])
  nota1       Decimal
  nota2       Decimal
  nota3       Decimal
  nota4       Decimal
}

model Disciplina {
  id           Int    @id @unique @default(autoincrement())
  nome         String
  descricao    String
  cargaHoraria String
  nivel        String
  observacoes  String

  professor Professor[]
}
