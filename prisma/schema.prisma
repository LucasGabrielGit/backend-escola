generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model PessoaFisica {
  id             Int         @id @unique @default(autoincrement())
  nome           String
  dataNascimento DateTime
  genero         String
  email          String
  endereco       String
  numTelefone    String
  cpf            String      @unique
  rg             String      @unique
  nacionalidade  String
  observacoes    String
  aluno          Aluno[]
  arofessor      Professor[]
}

model Aluno {
  id             Int          @id @unique @default(autoincrement())
  pessoaFisicaId Int
  usuario        String       @unique
  senha          String
  pessoaFisica   PessoaFisica @relation(fields: [pessoaFisicaId], references: [id])
  matriculas     Matricula[]
  pendencias     Pendencia[]
}

model Professor {
  id                 Int          @id @unique @default(autoincrement())
  pessoaFisicaId     Int
  disciplinaId       Int
  titulacao          String
  areaEspecializacao String
  observacoes        String
  disciplina         Disciplina   @relation(fields: [disciplinaId], references: [id])
  pessoaFisica       PessoaFisica @relation(fields: [pessoaFisicaId], references: [id])
}

model Turma {
  id          Int         @id @unique @default(autoincrement())
  ano         String
  periodo     String
  capacidade  Int
  turno       String
  observacoes String
  matriculas  Matricula[]
}

model Matricula {
  id              Int      @id @unique @default(autoincrement())
  numeroMatricula String   @unique
  alunoId         Int
  turmaId         Int
  dataMatricula   DateTime
  status          Int
  observacoes     String
  turma           Turma    @relation(fields: [turmaId], references: [id])
  aluno           Aluno    @relation(fields: [alunoId], references: [id])
  notas           Nota[]
}

model Pendencia {
  id        Int    @id @unique @default(autoincrement())
  descricao String
  alunoId   Int
  aluno     Aluno  @relation(fields: [alunoId], references: [id])
}

model Nota {
  id          Int       @id @unique @default(autoincrement())
  matriculaId Int
  nota1       Decimal
  nota2       Decimal
  nota3       Decimal
  nota4       Decimal
  matricula   Matricula @relation(fields: [matriculaId], references: [id])
}

model Disciplina {
  id           Int         @id @unique @default(autoincrement())
  nome         String
  descricao    String
  cargaHoraria String
  nivel        String
  observacoes  String
  professor    Professor[]
}
